<!DOCTYPE html>
<html lang="tk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Bazar & Media | MEGA</title>
    
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

    <style>
        :root {
            --primary: #10b981;
            --glass: rgba(255, 255, 255, 0.95);
        }

        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; transition: 0.3s; }
        
        body { 
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
            background: radial-gradient(circle at top left, #064e3b, #0f172a);
            margin: 0; padding: 0;
            display: flex; justify-content: center;
            min-height: 100vh; color: #1e293b;
        }

        .app-shell { width: 100%; max-width: 450px; padding: 20px 20px 100px 20px; }

        /* SAHYPALAR - Di≈àe .active wagty g√∂r√ºn√Ω√§r */
        .page { display: none; opacity: 0; transform: translateY(10px); }
        .page.active { display: block; opacity: 1; transform: translateY(0); animation: fadeIn 0.4s forwards; }
        
        @keyframes fadeIn { to { opacity: 1; transform: translateY(0); } }

        .glass-card {
            background: var(--glass);
            backdrop-filter: blur(15px);
            border-radius: 30px;
            padding: 25px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.3);
            border: 1px solid rgba(255,255,255,0.3);
            margin-bottom: 20px;
        }

        /* D√ú√ùBI MEN√ùU (Z√§hmet √ßek√Ω√§n b√∂legi) */
        .nav-bar {
            position: fixed; bottom: 20px; left: 50%; transform: translateX(-50%);
            width: calc(100% - 40px); max-width: 380px;
            background: rgba(15, 23, 42, 0.95); backdrop-filter: blur(20px);
            border-radius: 25px; display: flex; justify-content: space-around;
            padding: 12px; border: 1px solid rgba(255,255,255,0.1); z-index: 9999;
        }
        .nav-item { color: #94a3b8; text-decoration: none; font-size: 11px; display: flex; flex-direction: column; align-items: center; gap: 4px; cursor: pointer; flex: 1; }
        .nav-item.active { color: var(--primary); font-weight: bold; }
        .nav-icon { font-size: 22px; }

        .input-box { background: #f8fafc; border-radius: 18px; padding: 12px 15px; margin-bottom: 12px; border: 1.5px solid #e2e8f0; }
        .input-box label { font-size: 10px; font-weight: 800; color: #94a3b8; display: block; }
        .input-box input { width: 100%; border: none; background: transparent; font-size: 20px; font-weight: 700; outline: none; }

        .news-card { background: white; border-radius: 22px; margin-bottom: 15px; border: 1px solid #e5e7eb; overflow: hidden; }
        .audio-btn { width: 100%; background: #f1f5f9; border: none; padding: 12px; border-radius: 12px; font-weight: 700; cursor: pointer; }
    </style>
</head>
<body>

    <div class="app-shell">
        
        <section id="bazar" class="page active">
            <h2 style="color: white; text-align: center;">üìä Bazar Nyrhy</h2>
            <div class="glass-card">
                <div style="display: flex; gap: 8px; margin-bottom: 15px;">
                    <div style="flex:1"><input type="number" id="rUSD" value="19.50" oninput="calc('TMT')" style="width:100%; padding:8px; border-radius:10px; text-align:center;"></div>
                    <div style="flex:1"><input type="number" id="rRUB" value="0.21" oninput="calc('TMT')" style="width:100%; padding:8px; border-radius:10px; text-align:center;"></div>
                    <div style="flex:1"><input type="number" id="rTRY" value="0.65" oninput="calc('TMT')" style="width:100%; padding:8px; border-radius:10px; text-align:center;"></div>
                    </div>
                <div class="input-box"><label>üá∑üá∫ RUBL (‚ÇΩ)</label><input type="number" id="iRUB" oninput="calc('RUB')"></div>
                <div class="input-box" style="border-color: var(--primary);"><label>üáπüá≤ MANAT (TMT)</label><input type="number" id="iTMT" oninput="calc('TMT')"></div>
                <div class="input-box"><label>üá∫üá∏ DOLLAR ($)</label><input type="number" id="iUSD" oninput="calc('USD')"></div>
            </div>
        </section>

        <section id="media" class="page">
            <h2 style="color: white; text-align: center;">üì∞ T√§zelikler</h2>
            <div id="news-container"></div>
        </section>

        <section id="profile" class="page">
            <div id="auth-section" class="glass-card">
                <h2>Agza bolu≈à</h2>
                <div class="input-box"><label>Ady≈àyz</label><input type="text" id="regName"></div>
                <button onclick="handleRegister()" style="width:100%; background:var(--primary); color:white; border:none; padding:15px; border-radius:18px; font-weight:bold;">Hasap d√∂ret</button>
            </div>

            <div id="user-profile" class="glass-card" style="display: none; text-align: center;">
                <img src="me.jpg" style="width: 100px; height: 100px; border-radius: 50%; border: 4px solid var(--primary); object-fit: cover;">
                <h2 id="displayUserName">Ulanyjy</h2>
                <button onclick="handleLogout()" style="width:100%; background:#fee2e2; color:#ef4444; border:none; padding:12px; border-radius:15px; font-weight:bold;">√áyky≈ü et</button>
            </div>
        </section>

        <nav class="nav-bar">
            <div class="nav-item active" onclick="showPage('bazar')">
                <span class="nav-icon">üìä</span><span>Bazar</span>
            </div>
            <div class="nav-item" onclick="showPage('media')">
                <span class="nav-icon">üì∞</span><span>Media</span>
            </div>
            <div class="nav-item" onclick="showPage('profile')">
                <span class="nav-icon">üë§</span><span>Profil</span>
            </div>
        </nav>
    </div>

    <script>
        // Sahypa √ßal≈üyjy funksi√Ωa (G√ú√ù√áLENDƒ∞Rƒ∞LDƒ∞)
        function showPage(pageId) {
            // 1. √Ñhli sahypalary √Ωap
            const pages = document.querySelectorAll('.page');
            pages.forEach(p => p.classList.remove('active'));

            // 2. √Ñhli men√Ωu d√ºwmelerini≈à re≈àkini √∂√ß√ºr
            const navItems = document.querySelectorAll('.nav-item');
            navItems.forEach(item => item.classList.remove('active'));

            // 3. Di≈àe basylan sahypany we d√ºwm√§ni a√ß
            document.getElementById(pageId).classList.add('active');
            
            // D√ºwm√§ni tapmak we re≈àklendirmek
            const activeNav = Array.from(navItems).find(item => item.innerText.toLowerCase().includes(pageId));
            if(activeNav) activeNav.classList.add('active');

            // Habarlar sahypasy bolsa √Ω√ºkle
            if(pageId === 'media') loadNews();
        }

        // HABARLAR
        const newsData = [
            { cat: "T√úRKMENISTAN", title: "Sanly bilim √∂s√Ω√§r", desc: "A≈ügabady≈à orta mekdeplerinde t√§ze sanly ulgam orna≈üdyryldy.", color: "#10b981" },
            { cat: "D√úN√ù√Ñ", title: "Marsda suw tapyldy", desc: "NASA alymlary Marsy≈à a≈üagynda uly m√∂√ßberde suw bar di√Ωen netij√§ geldiler.", color: "#38bdf8" }
        ];

        function loadNews() {
            const container = document.getElementById('news-container');
            container.innerHTML = newsData.map((n, i) => `
                <div class="news-card"><div style="padding:15px">
                    <span style="background:${n.color}; color:white; font-size:10px; padding:3px 8px; border-radius:5px;">${n.cat}</span>
                    <h3 style="margin:10px 0; font-size:16px;">${n.title}</h3>
                    <p id="t-${i}" style="color:#64748b; font-size:13px;">${n.desc}</p>
                    <button class="audio-btn" onclick="speak('t-${i}')">üîä Di≈àle</button>
                </div></div>
            `).join('');
        }

        function speak(id) {
            const text = document.getElementById(id).innerText;
            const ut = new SpeechSynthesisUtterance(text);
            ut.lang = 'tr-TR';
            window.speechSynthesis.speak(ut);
        }

        function calc(type) {
            const rUSD = +document.getElementById('rUSD').value, rRUB = +document.getElementById('rRUB').value, rTRY = +document.getElementById('rTRY').value;
            const iUSD = document.getElementById('iUSD'), iRUB = document.getElementById('iRUB'), iTMT = document.getElementById('iTMT'), iTRY = document.getElementById('iTRY');
            let tmt = 0;
            if(type === 'TMT') tmt = +iTMT.value;
            else if(type === 'USD') tmt = +iUSD.value * rUSD;
            else if(type === 'RUB') tmt = +iRUB.value * rRUB;

            if(type !== 'TMT') iTMT.value = tmt ? tmt.toFixed(2) : "";
            if(type !== 'USD') iUSD.value = tmt ? (tmt / rUSD).toFixed(2) : "";
            if(type !== 'RUB') iRUB.value = tmt ? (tmt / rRUB).toFixed(2) : "";
        }

        function handleRegister() {
            const name = document.getElementById('regName').value;
            if (name) { localStorage.setItem('user', name); updateUI(); }
        }
        function handleLogout() { localStorage.removeItem('user'); updateUI(); }
        function updateUI() {
            const user = localStorage.getItem('user');
            document.getElementById('auth-section').style.display = user ? 'none' : 'block';
            document.getElementById('user-profile').style.display = user ? 'block' : 'none';
            if(user) document.getElementById('displayUserName').innerText = user;
        }

        window.onload = updateUI;
    </script>
</body>
</html>